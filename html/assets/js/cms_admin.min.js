var __assign=this&&this.__assign||function(){return(__assign=Object.assign||function(t){for(var n,e=1,i=arguments.length;e<i;e++)for(var a in n=arguments[e])Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a]);return t}).apply(this,arguments)};function bindField(t){var n=$("input[name=field]");$("input[name=name]").on("blur",function(){pinyinIfEmpty(n,$(this).val())}),$("input[name=type]").on("change",function(){$.get(t,{id:$("[name=id]").val(),type:$(this).val()},function(t){$(".option-box").html(t)})}).trigger("change"),$(".add-box button").on("click",function(){var t,n=$(this).prev(),e=n.val().toString().trim();e.length<1||(n.val(""),t=(n=$(this).closest(".tab-group")).find(".radio-label").length,n.find("[name=tab_name]").removeAttr("checked"),(n=$(this).closest(".add-box")).before("<span class='radio-label'>\n        <input type='radio' id='tab_name".concat(t,"' name='tab_name' value='").concat(e,"' checked>\n        <label for='tab_name").concat(t,"'>").concat(e,"</label>\n    </span>")),4<=t&&n.remove())})}function bindSite(){$(document).on("change","select[name=theme]",function(t){var n=$(this).closest("form").find("[name=id]").val();n&&0<n&&confirm("你正在更改主题，更改主题将删除站点数据！")})}function bindCat(){$("input[name=title]").on("blur",function(){pinyinIfEmpty($("input[name=name]"),$(this).val())}),$("input[name=type]").on("click",function(){var t,n=toInt($(this).val());$("input[name=url]").closest(".input-group").toggle(1<n),null!=(t=$(".editor-box").data("_instance"))&&t.toggle(1===n)}).each(function(){this.checked&&$(this).trigger("click")});function o(t){postJson(BASE_URI+"home/query_url",__assign({step:i},t),function(t){var n;200!==t.code?parseAjax(t):(n="",$.each(t.data,function(){var t=this.next?"next":"value";n+='<div class="option-list-item" data-'.concat(t,'="').concat(this[t],'">').concat(this.name,"</div>")}),e.find(".flip-tab-item.active .list-scroll-body").html(n),e.showCenter())})}var n,e=$(".url-dialog").dialog(),i=[];e.on("done",function(){var t=this.find(".option-list-item.selected").data("value");t&&(n.val(t),this.close())});e.box.on("click",".column-item",function(){var t=$(this),t=(i.splice(0),i.push(t.data("next")),t.closest(".flip-tab-item"));t.removeClass("active"),t.next(".flip-tab-item").addClass("active"),e.showCenter(),o({})}).on("click",".option-list-item",function(){var t=$(this),t=(t.addClass("selected").siblings().removeClass("selected"),t.data("next"));t&&(i.push(t),o({}))}).on("submit","form",function(t){t.preventDefault();for(var n={},e=0,i=$(this).serializeArray();e<i.length;e++){var a=i[e];n[a.name]=a.value}return o(n),!1}),$(document).on("click","*[data-help]",function(t){t.preventDefault(),e.showCenter(),e.find(".flip-tab-item").eq(0).addClass("active").siblings().removeClass("active"),n=$(this).prev()})}function pinyinIfEmpty(n,t){!n.val()&&t&&postJson(BASE_URI+"home/generate",{name:t},function(t){200==t.code&&n.val(t.data.replace(/\s/g,"").toLowerCase()).trigger("blur")})}function bindEditModel(){function n(t,n){t.val()||t.val(n)}var t=$("input[name=table]").on("blur",function(){var t=$(this).val();t&&(n($("input[name=category_template]"),t+""),n($("input[name=list_template]"),t+"_list"),n($("input[name=show_template]"),t+"_detail"))});$("input[name=name]").on("blur",function(){pinyinIfEmpty(t,$(this).val())}),$("input[name=type]").on("click",function(){var t=toInt($(this).val());$(".content-box").toggle(t<1),$(".form-box").toggle(0<t)}).each(function(){this.checked&&$(this).trigger("click")})}function bindEditOption(){$(".option-box .input-group .fa-times").on("click",function(){$(this).closest(".input-group").remove()})}$(function(){setTimeout(function(){$(".column-full-item .overlay").remove()},1e3),$(document).on("click",".multi-input-container .selected-container .item-close",function(){$(this).closest(".selected-item").remove()}).on("click",".multi-input-container .add-container .add-item",function(){var t=$(this),n=t.closest(".multi-input-container").find(".selected-container"),t=t.closest(".add-container").find("select:last,input,textarea"),e=t.val(),i=e,a=("SELECT"===t[0].nodeName&&(i=(a=t[0]).options[a.selectedIndex].text),t.attr("name").substring(4));n.append("<div class='selected-item'>\n        <span class='item-close'>&times;</span>\n        <div class='item-label'>".concat(i,"</div>\n        <input type='hidden' name='").concat(a,"[]' value='").concat(e,"'>\n    </div>"))}).on("click","button[data-type=publish]",function(t){t.preventDefault();t=$(this).closest("form");t.append('<input type="hidden" name="status" value="5">'),t.trigger("submit")}).on("click","*[data-tour]",function(t){t.preventDefault(),$(this).tour({title:"CMS操作引导",items:[{selector:".sidebar-container",content:"菜单"},{selector:".form-table",content:"表格"},{selector:".form-table .tab-header",content:"切换表格内容"},{selector:".form-table .btn-group",content:"保存操作"}]}).open()})});